---
title: "microbenchmark-rdgidb"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{microbenchmark-rdgidb}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction

This vignette microbenchmarks functions from rdgidb

## Load Packages

```{r setup}
library(rdgidb)
library(microbenchmark)
library(httptest)
```

## Initalize Inputs

```{r inputs}
genes <- c("BRAF", "PDGFRA")
drugs <- c("Imatinib")
```

# Microbenchmarks

## get_drugs()

```{r benchmark-get-drugs}
httptest::with_mock_api({
  microbenchmark(
    get_drugs(drugs),
    times = 10
  )
})
```

## get_genes()

```{r benchmark-get-genes}
httptest::with_mock_api("fixtures", {
  microbenchmark(
    get_genes(genes),
    times = 10
  )
})
```

## get_interactions()

```{r benchmark-get-interactions}
httptest::with_mock_api("fixtures", {
  # By Gene
  microbenchmark(
    get_interactions(genes, search="genes"),
    times = 10
  )

  # By Drug
  microbenchmark(
    get_interactions(drugs, search="drugs"),
    times = 10
  )
})
```

## get_categories()

```{r benchmark-get-categories}
httptest::with_mock_api("fixtures", {
  microbenchmark(
    get_categories(genes),
    times = 10
  )
})
```

## get_sources()

```{r benchmark-get-sources}
httptest::with_mock_api("fixtures", {
  microbenchmark(
    get_sources(),
    times = 10
  )
})
```